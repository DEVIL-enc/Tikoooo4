<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Login</title>
<style>
body{background:#081a2b;color:#fff;display:flex;align-items:center;justify-content:center;height:100vh}
.box{background:#0b2a44;padding:30px;border-radius:20px;width:300px}
input,button{width:100%;padding:12px;margin-top:10px;border-radius:12px;border:none}
</style>
</head>
<body>
<div class="box">
<h3>تسجيل الدخول</h3>
<input id="k" placeholder="License Key">
<button onclick="go()">دخول</button>
<p id="m"></p>
</div>
<script>
function uuid(){return crypto.randomUUID();}
async function go(){
let k=document.getElementById("k").value;
let d=localStorage.getItem("DEVICE")||uuid();
localStorage.setItem("DEVICE",d);
const r=await fetch("/me",{headers:{"X-KEY":k,"X-DEVICE":d}});
if(!r.ok){m.textContent="مفتاح غير صالح";return;}
localStorage.setItem("KEY",k); location.href="/";
}
</script>
</body>
</html>
